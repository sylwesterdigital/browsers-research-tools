<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Progressive Image Bench – 2025-10-16T16-46-00+01-00</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
<style>
body { font: 14px/1.4 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,system-ui; margin: 20px; }
h1 { font-size: 20px; margin: 0 0 8px; }
.grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
.card { padding: 12px; border: 1px solid #e3e3e3; border-radius: 10px; background: #fff; }
.table { border-collapse: collapse; width: 100%; font-size: 13px; }
.table th, .table td { border-bottom: 1px solid #eee; padding: 6px 8px; text-align: left; }
.bad { color: #b00; font-weight: 600; }
.small { color:#666; font-size:12px; }
.kv { display:flex; flex-wrap:wrap; gap:10px; margin-bottom:10px; }
.kv div { background:#f7f7f7; border-radius:8px; padding:6px 8px; }
</style>
</head>
<body>
<h1>Progressive Image Bench – 2025-10-16T16-46-00+01-00</h1>
<div class="small">Config: <code>bench.config.json</code></div>

<div class="card" id="meta"></div>

<div class="grid">
  <div class="card"><div id="box_t85"></div></div>
  <div class="card"><div id="box_t95"></div></div>
  <div class="card"><div id="box_vi"></div></div>
  <div class="card"><div id="bars_median"></div></div>
  <div class="card">
    <table class="table" id="summary"></table>
  </div>
</div>

<script>
const aggregated = [{"browser":"chromium","browser_version":"141.0.7390.37","id":"jpeg-baseline","label":"JPEG Baseline","format":"jpeg","notes":"","dist":{"count":5,"t85":[2359,2278,2312,2274,2394],"t95":[2359,2278,2312,2274,2394],"visIndex":[0.6028,0.5845,0.6026,0.5938,0.6106]},"median":{"t85":2312,"t95":2312,"visIndex":0.6026},"p10":{"t85":2275.6,"t95":2275.6,"visIndex":0.58822},"p90":{"t85":2380,"t95":2380,"visIndex":0.60748},"errors":[]},{"browser":"chromium","browser_version":"141.0.7390.37","id":"jpeg-progressive","label":"JPEG Progressive","format":"jpeg","notes":"","dist":{"count":5,"t85":[1326,1296,1299,1301,1304],"t95":[1326,1296,1299,1301,1304],"visIndex":[0.3492,0.3429,0.3447,0.3465,0.3444]},"median":{"t85":1301,"t95":1301,"visIndex":0.3447},"p10":{"t85":1297.2,"t95":1297.2,"visIndex":0.34349999999999997},"p90":{"t85":1317.2,"t95":1317.2,"visIndex":0.34812},"errors":[]},{"browser":"chromium","browser_version":"141.0.7390.37","id":"webp","label":"WebP","format":"webp","notes":"","dist":{"count":5,"t85":[3366,3298,3334,3309,3299],"t95":[3366,3298,3334,3309,3299],"visIndex":[0.7852,0.7752,0.7985,0.7763,0.7754]},"median":{"t85":3309,"t95":3309,"visIndex":0.7763},"p10":{"t85":3298.4,"t95":3298.4,"visIndex":0.77528},"p90":{"t85":3353.2,"t95":3353.2,"visIndex":0.79318},"errors":[]},{"browser":"chromium","browser_version":"141.0.7390.37","id":"avif","label":"AVIF","format":"avif","notes":"","dist":{"count":5,"t85":[2115,2113,2126,2143,2131],"t95":[2115,2113,2126,2143,2131],"visIndex":[0.7433,0.7148,0.7163,0.7184,0.7175]},"median":{"t85":2126,"t95":2126,"visIndex":0.7175},"p10":{"t85":2113.8,"t95":2113.8,"visIndex":0.7154},"p90":{"t85":2138.2,"t95":2138.2,"visIndex":0.73334},"errors":[]},{"browser":"chromium","browser_version":"141.0.7390.37","id":"avif-progressive","label":"AVIF (progressive)","format":"avif","notes":"single-input progressive","dist":{"count":5,"t85":[1310,1329,1296,1297,1298],"t95":[1310,1329,1296,1297,1298],"visIndex":[0.2515,0.2604,0.2521,0.2526,0.2526]},"median":{"t85":1298,"t95":1298,"visIndex":0.2526},"p10":{"t85":1296.4,"t95":1296.4,"visIndex":0.25174},"p90":{"t85":1321.4,"t95":1321.4,"visIndex":0.25728},"errors":[]},{"browser":"chromium","browser_version":"141.0.7390.37","id":"jxl","label":"JPEG XL","format":"jxl","notes":"","dist":{"count":5,"t85":[348,357,355,353,353],"t95":[348,357,355,353,353],"visIndex":[0.0227,0.0226,0.0225,0.0226,0.0225]},"median":{"t85":353,"t95":353,"visIndex":0.0226},"p10":{"t85":350,"t95":350,"visIndex":0.0225},"p90":{"t85":356.20000000000005,"t95":356.20000000000005,"visIndex":0.02266},"errors":[]},{"browser":"chromium","browser_version":"141.0.7390.37","id":"jxl-progressive","label":"JPEG XL (progressive)","format":"jxl","notes":"","dist":{"count":5,"t85":[355,356,356,378,356],"t95":[355,356,356,378,356],"visIndex":[0.0228,0.0224,0.0226,0.0241,0.0224]},"median":{"t85":356,"t95":356,"visIndex":0.0226},"p10":{"t85":355.4,"t95":355.4,"visIndex":0.0224},"p90":{"t85":369.20000000000005,"t95":369.20000000000005,"visIndex":0.02358},"errors":[]},{"browser":"chromium","browser_version":"141.0.7390.37","id":"png-interlaced","label":"PNG (Adam7)","format":"png","notes":"","dist":{"count":5,"t85":[90,93,92,94,90],"t95":[90,93,92,94,90],"visIndex":[0,0,0,0,0]},"median":{"t85":92,"t95":92,"visIndex":0},"p10":{"t85":90,"t95":90,"visIndex":0},"p90":{"t85":93.6,"t95":93.6,"visIndex":0},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"jpeg-baseline","label":"JPEG Baseline","format":"jpeg","notes":"","dist":{"count":5,"t85":[764,133,105,106,105],"t95":[764,133,105,106,105],"visIndex":[0.4105,0,0,0,0]},"median":{"t85":106,"t95":106,"visIndex":0},"p10":{"t85":105,"t95":105,"visIndex":0},"p90":{"t85":511.6000000000001,"t95":511.6000000000001,"visIndex":0.24630000000000002},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"jpeg-progressive","label":"JPEG Progressive","format":"jpeg","notes":"","dist":{"count":5,"t85":[165,109,108,105,106],"t95":[165,109,108,105,106],"visIndex":[0.0878,0,0,0,0]},"median":{"t85":108,"t95":108,"visIndex":0},"p10":{"t85":105.4,"t95":105.4,"visIndex":0},"p90":{"t85":142.6,"t95":142.6,"visIndex":0.05268000000000001},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"webp","label":"WebP","format":"webp","notes":"","dist":{"count":5,"t85":[835,112,107,112,109],"t95":[835,112,107,112,109],"visIndex":[0.4981,0,0,0,0]},"median":{"t85":112,"t95":112,"visIndex":0},"p10":{"t85":107.80000000000001,"t95":107.80000000000001,"visIndex":0},"p90":{"t85":545.8000000000001,"t95":545.8000000000001,"visIndex":0.29886},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"avif","label":"AVIF","format":"avif","notes":"","dist":{"count":5,"t85":[728,108,107,106,106],"t95":[728,108,107,106,106],"visIndex":[0.462,0,0,0,0]},"median":{"t85":107,"t95":107,"visIndex":0},"p10":{"t85":106,"t95":106,"visIndex":0},"p90":{"t85":480.00000000000006,"t95":480.00000000000006,"visIndex":0.27720000000000006},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"avif-progressive","label":"AVIF (progressive)","format":"avif","notes":"single-input progressive","dist":{"count":5,"t85":[1627,111,108,107,107],"t95":[1627,111,108,107,107],"visIndex":[0.6709,0,0,0,0]},"median":{"t85":108,"t95":108,"visIndex":0},"p10":{"t85":107,"t95":107,"visIndex":0},"p90":{"t85":1020.6000000000001,"t95":1020.6000000000001,"visIndex":0.40254000000000006},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"jxl","label":"JPEG XL","format":"jxl","notes":"","dist":{"count":5,"t85":[62,62,62,63,65],"t95":[62,62,62,63,65],"visIndex":[0,0,0,0,0]},"median":{"t85":62,"t95":62,"visIndex":0},"p10":{"t85":62,"t95":62,"visIndex":0},"p90":{"t85":64.2,"t95":64.2,"visIndex":0},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"jxl-progressive","label":"JPEG XL (progressive)","format":"jxl","notes":"","dist":{"count":5,"t85":[60,63,63,66,64],"t95":[60,63,63,66,64],"visIndex":[0,0,0,0,0]},"median":{"t85":63,"t95":63,"visIndex":0},"p10":{"t85":61.2,"t95":61.2,"visIndex":0},"p90":{"t85":65.2,"t95":65.2,"visIndex":0},"errors":[]},{"browser":"firefox","browser_version":"142.0.1","id":"png-interlaced","label":"PNG (Adam7)","format":"png","notes":"","dist":{"count":5,"t85":[6150,111,108,106,109],"t95":[6150,111,108,106,109],"visIndex":[0.5098,0,0,0,0]},"median":{"t85":109,"t95":109,"visIndex":0},"p10":{"t85":106.8,"t95":106.8,"visIndex":0},"p90":{"t85":3734.4000000000005,"t95":3734.4000000000005,"visIndex":0.30588000000000004},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"jpeg-baseline","label":"JPEG Baseline","format":"jpeg","notes":"","dist":{"count":5,"t85":[1275,95,84,85,85],"t95":[1275,95,84,85,85],"visIndex":[0.6178,0,0,0,0]},"median":{"t85":85,"t95":85,"visIndex":0},"p10":{"t85":84.4,"t95":84.4,"visIndex":0},"p90":{"t85":803.0000000000001,"t95":803.0000000000001,"visIndex":0.37068000000000006},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"jpeg-progressive","label":"JPEG Progressive","format":"jpeg","notes":"","dist":{"count":5,"t85":[611,114,82,83,85],"t95":[611,114,82,83,85],"visIndex":[0.4299,0,0,0,0]},"median":{"t85":85,"t95":85,"visIndex":0},"p10":{"t85":82.4,"t95":82.4,"visIndex":0},"p90":{"t85":412.20000000000005,"t95":412.20000000000005,"visIndex":0.25794000000000006},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"webp","label":"WebP","format":"webp","notes":"","dist":{"count":5,"t85":[1395,118,85,86,86],"t95":[1395,118,85,86,86],"visIndex":[0.6385,0,0,0,0]},"median":{"t85":86,"t95":86,"visIndex":0},"p10":{"t85":85.4,"t95":85.4,"visIndex":0},"p90":{"t85":884.2,"t95":884.2,"visIndex":0.38310000000000005},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"avif","label":"AVIF","format":"avif","notes":"","dist":{"count":5,"t85":[704,117,85,83,84],"t95":[704,117,85,83,84],"visIndex":[0.4624,0,0,0,0]},"median":{"t85":85,"t95":85,"visIndex":0},"p10":{"t85":83.4,"t95":83.4,"visIndex":0},"p90":{"t85":469.2000000000001,"t95":469.2000000000001,"visIndex":0.27744},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"avif-progressive","label":"AVIF (progressive)","format":"avif","notes":"single-input progressive","dist":{"count":5,"t85":[61,91,86,85,86],"t95":[61,91,86,85,86],"visIndex":[0,0,0,0,0]},"median":{"t85":86,"t95":86,"visIndex":0},"p10":{"t85":70.6,"t95":70.6,"visIndex":0},"p90":{"t85":89,"t95":89,"visIndex":0},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"jxl","label":"JPEG XL","format":"jxl","notes":"","dist":{"count":5,"t85":[764,113,84,86,84],"t95":[764,113,84,86,84],"visIndex":[0.4839,0,0,0,0]},"median":{"t85":86,"t95":86,"visIndex":0},"p10":{"t85":84,"t95":84,"visIndex":0},"p90":{"t85":503.6000000000001,"t95":503.6000000000001,"visIndex":0.29034000000000004},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"jxl-progressive","label":"JPEG XL (progressive)","format":"jxl","notes":"","dist":{"count":5,"t85":[773,111,84,86,85],"t95":[773,111,84,86,85],"visIndex":[0.4844,0,0,0,0]},"median":{"t85":86,"t95":86,"visIndex":0},"p10":{"t85":84.4,"t95":84.4,"visIndex":0},"p90":{"t85":508.20000000000005,"t95":508.20000000000005,"visIndex":0.29064000000000006},"errors":[]},{"browser":"webkit","browser_version":"26.0","id":"png-interlaced","label":"PNG (Adam7)","format":"png","notes":"","dist":{"count":5,"t85":[11088,113,85,88,88],"t95":[11088,113,85,88,88],"visIndex":[0.9308,0,0,0,0]},"median":{"t85":88,"t95":88,"visIndex":0},"p10":{"t85":86.2,"t95":86.2,"visIndex":0},"p90":{"t85":6698.000000000001,"t95":6698.000000000001,"visIndex":0.5584800000000001},"errors":[]}];
const meta = {"system":{"os_type":"Darwin","os_platform":"darwin","os_release":"24.1.0","os_arch":"arm64","cpu_model":"Apple M2 Pro","cpu_cores":12,"memory_gb":17},"node":"v20.19.4","versions":{"chromium":"141.0.7390.37","firefox":"142.0.1","webkit":"26.0"}};

function renderMeta() {
  const m = document.getElementById('meta');
  const sys = meta.system;
  const vers = meta.versions;
  const osLine = sys.os_type + " " + sys.os_release + " (" + sys.os_platform + ", " + sys.os_arch + ")";
  const hwLine = sys.cpu_model + " ×" + sys.cpu_cores + " • " + sys.memory_gb + " GB RAM";
  const nodeLine = "Node " + meta.node;
  const browsers = Object.entries(vers).map(([k,v]) => k + ": " + v).join(" • ");
  m.innerHTML = '<div class="kv">'
    + '<div><b>OS</b>: ' + osLine + '</div>'
    + '<div><b>HW</b>: ' + hwLine + '</div>'
    + '<div><b>Node</b>: ' + nodeLine + '</div>'
    + '<div><b>Browsers</b>: ' + browsers + '</div>'
    + '</div>';
}

function boxPlot(metric, elId, title) {
  // Build per-browser traces with distributions over runs per test (concatenate with test labels)
  const browsers = [...new Set(aggregated.map(r => r.browser))];
  const traces = [];
  for (const b of browsers) {
    const rows = aggregated.filter(r => r.browser === b);
    const x = [];
    const y = [];
    rows.forEach(r => {
      const arr = r.dist[metric] || [];
      arr.forEach(v => { x.push(r.id); y.push(v); });
    });
    traces.push({ x, y, name: b, type: 'box', boxpoints:'outliers' });
  }
  Plotly.newPlot(elId, traces, {
    title,
    xaxis: { title: 'Test ID' },
    yaxis: { title: metric, rangemode:'tozero' },
    margin: { t: 40, r: 10, b: 60, l: 50 }
  }, { displaylogo:false, responsive:true });
}

function barsMedian(elId, title) {
  const browsers = [...new Set(aggregated.map(r => r.browser))];
  const ids = [...new Set(aggregated.map(r => r.id))];
  const mk = k => ids.map(id => aggregated.find(r => r.id===id && r.browser===k)?.median.visIndex ?? null);
  const traces = browsers.map(b => ({ x: ids, y: mk(b), name: b, type:'bar' }));
  Plotly.newPlot(elId, traces, {
    title,
    barmode:'group',
    xaxis:{ title:'Test' },
    yaxis:{ title:'Median Visual Index', rangemode:'tozero', tickformat:'.3f' },
    margin:{ t:40, r:10, b:60, l:50 }
  }, { displaylogo:false, responsive:true });
}

function drawTable() {
  const headers = ["browser","browser_version","id","label","format",
                   "median_t85","p10_t85","p90_t85",
                   "median_t95","p10_t95","p90_t95",
                   "median_visIndex","p10_visIndex","p90_visIndex",
                   "notes","n_runs","errors"];
  const tbl = document.getElementById('summary');
  const thead = document.createElement('thead'); const trh = document.createElement('tr');
  headers.forEach(h => { const th = document.createElement('th'); th.textContent = h; trh.appendChild(th); });
  thead.appendChild(trh);
  const tbody = document.createElement('tbody');
  aggregated.forEach(r => {
    const tr = document.createElement('tr');
    const row = [
      r.browser, r.browser_version, r.id, r.label, r.format,
      round(r.median.t85), round(r.p10.t85), round(r.p90.t85),
      round(r.median.t95), round(r.p10.t95), round(r.p90.t95),
      fmt3(r.median.visIndex), fmt3(r.p10.visIndex), fmt3(r.p90.visIndex),
      r.notes || "", r.dist.count, r.errors?.join(" | ") || ""
    ];
    row.forEach(v => { const td = document.createElement('td'); td.textContent = v ?? ""; tr.appendChild(td); });
    tbody.appendChild(tr);
  });
  tbl.appendChild(thead); tbl.appendChild(tbody);

  function round(v){ return (v==null||isNaN(v)) ? "" : Math.round(v); }
  function fmt3(v){ return (v==null||isNaN(v)) ? "" : (+v).toFixed(3); }
}

renderMeta();
boxPlot('t85', 'box_t85', 't85 distribution (lower is better)');
boxPlot('t95', 'box_t95', 't95 distribution (lower is better)');
boxPlot('visIndex', 'box_vi', 'Visual Index distribution (lower is better)');
barsMedian('bars_median', 'Median Visual Index by browser/test');
drawTable();
</script>
</body>
</html>